!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs"),require("@angular/common")):"function"==typeof define&&define.amd?define("ng-password-validator",["exports","@angular/core","rxjs","@angular/common"],e):e((t=t||self)["ng-password-validator"]={},t.ng.core,t.rxjs,t.ng.common)}(this,(function(t,e,o,s){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var n=function(){return(n=Object.assign||function(t){for(var e,o=1,s=arguments.length;o<s;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function i(t,e,o,s){var n,i=arguments.length,r=i<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,o):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,s);else for(var p=t.length-1;p>=0;p--)(n=t[p])&&(r=(i<3?n(r):i>3?n(e,o,r):n(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r}function r(t,e){return function(o,s){e(o,s,t)}}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],s=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var a=new e.InjectionToken("NgPasswordValidatorOptions"),u={placement:"bottom","z-index":0,"custom-class":"custom-class",shadow:!0,theme:"pro",offset:8,heading:"Password Policy",successMessage:"Awesome! Password requirement fulfilled.",rules:{password:{type:"range",length:8,min:6,max:10},"include-symbol":!0,"include-number":!0,"include-lowercase-characters":!0,"include-uppercase-characters":!0}},l={password:!1,"include-symbol":!1,"include-number":!1,"include-lowercase-characters":!1,"include-uppercase-characters":!1},c=function(){function t(){this.value=new o.BehaviorSubject(l),this.updatedValue=this.value.asObservable()}return t.prototype.updateValue=function(t){this.value.next(t)},t=i([e.Injectable()],t)}(),h=function(){function t(t,o,s){this.elementRef=t,this.renderer=o,this.dataService=s,this.passwordStatus={password:!1,"include-symbol":!1,"include-number":!1,"include-lowercase-characters":!1,"include-uppercase-characters":!1},this.isSecure=!1,this.Show=!1,this.events=new e.EventEmitter,this.passwordOptions=n({},u)}return t.prototype.transitionEnd=function(){this.show&&this.events.emit({type:"shown"})},Object.defineProperty(t.prototype,"show",{get:function(){return this.Show},set:function(t){t&&this.setPosition(),this.Show=this.hostClassShow=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placement",{get:function(){return this.data.options.placement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.data.element},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elementPosition",{get:function(){return this.data.elementPosition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.data.options},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"popupOffset",{get:function(){switch(this.data.options.offset){case"":return u.offset;case"0":default:return+this.data.options.offset}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rules",{get:function(){return n(n({},this.data.defaultOptions.rules),this.data.options.rules)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultOptions",{get:function(){return this.data.defaultOptions},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var t=this;this.setCustomClass(),this.setStyles(),this.setTheme(),this.setCustomText(),this.dataService.updatedValue.subscribe((function(e){for(var o in t.passwordStatus=n(n({},t.passwordStatus),e),t.passwordOptions.rules)t.passwordOptions.rules[o]||delete t.passwordStatus[o];t.isSecure=Object.values(t.passwordStatus).every((function(t){return t}))}))},t.prototype.ngOnChanges=function(t){t&&t.data&&t.data.currentValue&&(this.data=t.data.currentValue)},t.prototype.setPosition=function(){var t,e;if(this.setHostStyle(this.placement))this.setPlacementClass(this.placement);else{var o=void 0;try{for(var s=p(["top","right","bottom","left"]),n=s.next();!n.done;n=s.next()){var i=n.value;if(this.setHostStyle(i))return this.setPlacementClass(i),void(o=!0)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}o||(this.setHostStyle(this.placement),this.setPlacementClass(this.placement))}},t.prototype.setPlacementClass=function(t){this.renderer.addClass(this.elementRef.nativeElement,"popup-"+t)},t.prototype.setHostStyle=function(t){var e,o,s=this.element instanceof SVGElement,n=this.elementRef.nativeElement,i=!this.elementPosition.right,r=s?this.element.getBoundingClientRect().height:this.element.offsetHeight,p=s?this.element.getBoundingClientRect().width:this.element.offsetWidth,a=n.clientHeight,u=n.clientWidth,l=window.pageYOffset;switch(i&&(r=0,p=0),t){case"top":e=this.elementPosition.top+l-(a+this.popupOffset),o=this.elementPosition.left;break;case"bottom":e=this.elementPosition.top+l+r+this.popupOffset,o=this.elementPosition.left;break;case"left":o=this.elementPosition.left-u-this.popupOffset,e=this.elementPosition.top+l;break;case"right":o=this.elementPosition.left+p+this.popupOffset,e=this.elementPosition.top+l}return this.hostStyleTop=e+"px",this.hostStyleLeft=o+"px",!0},t.prototype.setZIndex=function(){0!==this.options["z-index"]&&(this.hostStyleZIndex=this.options["z-index"])},t.prototype.setCustomClass=function(){var t=this;this.options.customClass&&this.options.customClass.split(" ").forEach((function(e){t.renderer.addClass(t.elementRef.nativeElement,e)}))},t.prototype.setTheme=function(){this.options.theme&&this.renderer.addClass(this.elementRef.nativeElement,"popup-"+this.options.theme)},t.prototype.setCustomText=function(){this.options.heading&&(this.heading=this.options.heading),this.options.successMessage&&(this.successMessage=this.options.successMessage)},t.prototype.setAnimationDuration=function(){this.hostStyleTransition="opacity "+this.options["animation-duration"]+"ms"},t.prototype.setStyles=function(){this.setZIndex(),this.setAnimationDuration(),this.hostClassShadow=this.options.shadow,this.hostStyleMaxWidth=this.options["max-width"]+"px",this.hostStyleWidth=this.options.width?this.options.width+"px":""},t.ctorParameters=function(){return[{type:e.ElementRef},{type:e.Renderer2},{type:c}]},i([e.Input()],t.prototype,"data",void 0),i([e.HostBinding("style.top")],t.prototype,"hostStyleTop",void 0),i([e.HostBinding("style.left")],t.prototype,"hostStyleLeft",void 0),i([e.HostBinding("style.z-index")],t.prototype,"hostStyleZIndex",void 0),i([e.HostBinding("style.transition")],t.prototype,"hostStyleTransition",void 0),i([e.HostBinding("style.width")],t.prototype,"hostStyleWidth",void 0),i([e.HostBinding("style.max-width")],t.prototype,"hostStyleMaxWidth",void 0),i([e.HostBinding("style.pointer-events")],t.prototype,"hostStylePointerEvents",void 0),i([e.HostBinding("class.popup-show")],t.prototype,"hostClassShow",void 0),i([e.HostBinding("class.popup-shadow")],t.prototype,"hostClassShadow",void 0),i([e.HostListener("transitionend",[""])],t.prototype,"transitionEnd",null),i([e.Input()],t.prototype,"show",null),t=i([e.Component({selector:"NgPasswordValidator",template:"<div class=\"popup-window\">\n    <div class=\"heading\">{{heading}}</div>\n    <div *ngIf=\"rules['password']\">\n        <div class=\"rule\" [hidden]=\"rules['password'].type !== 'number'\"\n            [ngClass]=\"{'rule-pass':passwordStatus['password']}\">\n            Password length should be {{rules['password'].length}} characters.\n        </div>\n        <div class=\"rule\" [hidden]=\"rules['password'].type !== 'range'\"\n            [ngClass]=\"{'rule-pass':passwordStatus['password']}\">\n            Password length should be {{rules['password'].min}} - {{rules['password'].max}}\n            characters.\n        </div>\n    </div>\n    <div class=\"rule\" [hidden]=\"!rules['include-symbol']\"\n        [ngClass]=\"{'rule-pass':passwordStatus['include-symbol']}\">\n        Include Symbols:( e.g. @#$% )\n    </div>\n    <div class=\"rule\" [hidden]=\"!rules['include-number']\"\n        [ngClass]=\"{'rule-pass':passwordStatus['include-number']}\">\n        Include Numbers:( e.g.123456 )\n    </div>\n    <div class=\"rule\" [hidden]=\"!rules['include-lowercase-characters']\"\n        [ngClass]=\"{'rule-pass':passwordStatus['include-lowercase-characters']}\">\n        Include Lowercase Characters:(e.g. abcdefgh )\n    </div>\n    <div class=\"rule\" [hidden]=\"!rules['include-uppercase-characters']\"\n        [ngClass]=\"{'rule-pass':passwordStatus['include-uppercase-characters']}\">\n        Include Uppercase Characters:(e.g. ABCDEFGH )\n    </div>\n    <div class=\"success-message\" [hidden]=\"!isSecure\">\n        {{successMessage}}\n    </div>\n</div>\n",host:{class:"popup"},styles:['@charset "UTF-8";:host{max-width:390px;background-color:#fff;color:#000;text-align:left;border-radius:6px;position:absolute;pointer-events:none;padding:10px;z-index:1000;display:block;opacity:0;transition:opacity .3s ease-in-out;top:0;left:0}:host.popup-show{opacity:1}:host.popup-shadow{box-shadow:0 1px 5px 0 rgba(0,0,0,.4)}:host.popup .popup-window .heading{font-size:16px;color:#000;margin-bottom:.5rem;font-weight:700}:host.popup .popup-window .rule{font-size:14px;color:#6a6a6a;line-height:18px;margin:3px 0}:host.popup .popup-window .rule::before{content:"\\a";width:5px;height:5px;border-radius:50%;background:#6a6a6a;display:inline-block;vertical-align:sub;margin:0 10px 6px 0}:host.popup .popup-window .rule.rule-pass{text-decoration:line-through;color:#d3d3d3}:host.popup .popup-window .rule.rule-pass::before{background:#d3d3d3}:host.popup .popup-window .success-message{color:#28a745;text-align:center;font-size:16px;margin-top:5px}:host.popup.popup-pro .popup-window .rule.rule-pass{color:#28a745;text-decoration:none}:host.popup.popup-pro .popup-window .rule.rule-pass::before{content:"✓"!important;width:0;height:0;padding-right:5px;vertical-align:inherit;background:#28a745}:host.popup.popup-pro .popup-window .success-message{color:#9c0404}']})],t)}(),d=function(){function t(t,o,s,n,i,r){this.initOptions=t,this.elementRef=o,this.componentFactoryResolver=s,this.appRef=n,this.dataService=i,this.injector=r,this.regExpForLength=/^(.){8}$/,this.regExpForOneUpper=/^(?=.*[A-Z])(.*)$/,this.regExpForOneLower=/^(?=.*[a-z])(.*)$/,this.regExpForOneDigit=/^(?=.*[0-9])(.*)$/,this.regExpForSpecialCharacters=/^(?=.*[!@#$%^&*])([a-zA-Z0-9!@#$%^&*]*)$/,this.isValid=!1,this.inputValue="",this.events=new e.EventEmitter,this.valid=new e.EventEmitter}return Object.defineProperty(t.prototype,"optionsInput",{set:function(t){t&&u&&(this.passwordOptions=this.deepMerge(u,t),this.createPasswordRegex())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.passwordOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPopupDestroyed",{get:function(){return this.componentRef&&this.componentRef.hostView.destroyed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"popupPosition",{get:function(){return this.options.position?this.options.position:this.elementPosition},enumerable:!0,configurable:!0}),t.prototype.onMouseEnter=function(t){this.updatePasswordOptions(),this.show(),this.checkPassword(t)},t.prototype.updatePasswordOptions=function(){this.popup&&u&&(this.passwordOptions=this.deepMerge(u,this.popup),this.createPasswordRegex())},t.prototype.onMouseLeave=function(){this.destroyPopup(),this.valid.emit(this.isValid)},t.prototype.onInput=function(t){this.checkPassword(t)},t.prototype.ngOnChanges=function(t){var e=this.getProperties(t);this.applyOptionsDefault(e,u)},t.prototype.ngOnDestroy=function(){this.destroyPopup(),this.componentSubscribe&&this.componentSubscribe.unsubscribe()},t.prototype.deepMerge=function(t,e){var o,s;try{for(var n=p(Object.keys(e)),i=n.next();!i.done;i=n.next()){var r=i.value;e[r]instanceof Object&&Object.assign(e[r],this.deepMerge(t[r],e[r]))}}catch(t){o={error:t}}finally{try{i&&!i.done&&(s=n.return)&&s.call(n)}finally{if(o)throw o.error}}return Object.assign(t||{},e),t},t.prototype.createPasswordRegex=function(){if(this.passwordOptions.rules.password)switch(this.passwordOptions.rules.password.type){case"number":this.regExpForLength=new RegExp("^(.){"+this.passwordOptions.rules.password.length+"}$");break;case"range":this.regExpForLength=new RegExp("^(.){"+this.passwordOptions.rules.password.min+","+this.passwordOptions.rules.password.max+"}$")}},t.prototype.checkPassword=function(t){var e={password:!!(t&&t.length&&t.match(this.regExpForLength)),"include-symbol":!!(t&&t.length&&t.match(this.regExpForSpecialCharacters)),"include-number":!!(t&&t.length&&t.match(this.regExpForOneDigit)),"include-lowercase-characters":!!(t&&t.length&&t.match(this.regExpForOneLower)),"include-uppercase-characters":!!(t&&t.length&&t.match(this.regExpForOneUpper))};for(var o in this.passwordOptions.rules)this.passwordOptions.rules[o]||delete e[o];this.isValid=Object.values(e).every((function(t){return t})),this.dataService.updateValue(e)},t.prototype.getProperties=function(t){var e={},o={};for(var s in t)"options"!==s&&(e[s]=t[s].currentValue),"options"===s&&(o=t[s].currentValue);return Object.assign({},o,e)},t.prototype.getElementPosition=function(){this.elementPosition=this.elementRef.nativeElement.getBoundingClientRect()},t.prototype.createPopup=function(){this.getElementPosition(),this.appendComponentToBody(h),this.showPopupElem()},t.prototype.destroyPopup=function(){if(!this.isPopupDestroyed){if(this.hidePopup(),!this.componentRef||this.isPopupDestroyed)return;this.appRef.detachView(this.componentRef.hostView),this.componentRef.destroy(),this.events.emit({type:"hidden",position:this.popupPosition})}},t.prototype.showPopupElem=function(){this.componentRef.instance.show=!0,this.events.emit({type:"show",position:this.popupPosition})},t.prototype.hidePopup=function(){this.componentRef&&!this.isPopupDestroyed&&(this.componentRef.instance.show=!1,this.events.emit({type:"hide",position:this.popupPosition}))},t.prototype.appendComponentToBody=function(t){var e=this;this.componentRef=this.componentFactoryResolver.resolveComponentFactory(t).create(this.injector),this.componentRef.instance.data={element:this.elementRef.nativeElement,elementPosition:this.popupPosition,options:this.options,defaultOptions:u},this.appRef.attachView(this.componentRef.hostView);var o=this.componentRef.hostView.rootNodes[0];document.body.appendChild(o),this.componentSubscribe=this.componentRef.instance.events.subscribe((function(t){e.handleEvents(t)}))},t.prototype.applyOptionsDefault=function(t,e){this.initOptions=Object.assign({},this.initOptions||{},t,e)},t.prototype.handleEvents=function(t){"shown"===t.type&&this.events.emit({type:"shown",position:this.popupPosition})},t.prototype.show=function(){!this.componentRef||this.isPopupDestroyed?this.createPopup():this.isPopupDestroyed||this.showPopupElem()},t.prototype.hide=function(){this.destroyPopup()},t.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Optional},{type:e.Inject,args:[a]}]},{type:e.ElementRef},{type:e.ComponentFactoryResolver},{type:e.ApplicationRef},{type:c},{type:e.Injector}]},i([e.Input("options")],t.prototype,"optionsInput",null),i([e.Input("NgPasswordValidator")],t.prototype,"popup",void 0),i([e.Input("placement")],t.prototype,"placement",void 0),i([e.Input("z-index")],t.prototype,"zIndex",void 0),i([e.Input("animation-duration")],t.prototype,"animationDuration",void 0),i([e.Input("custom-class")],t.prototype,"customClass",void 0),i([e.Input("shadow")],t.prototype,"shadow",void 0),i([e.Input("theme")],t.prototype,"theme",void 0),i([e.Input("offset")],t.prototype,"offset",void 0),i([e.Input("width")],t.prototype,"width",void 0),i([e.Input("max-width")],t.prototype,"maxWidth",void 0),i([e.Input("position")],t.prototype,"position",void 0),i([e.Input("heading")],t.prototype,"heading",void 0),i([e.Input("successMessage")],t.prototype,"successMessage",void 0),i([e.Output()],t.prototype,"events",void 0),i([e.Output()],t.prototype,"valid",void 0),i([e.HostListener("focusin",["$event.target.value"])],t.prototype,"onMouseEnter",null),i([e.HostListener("focusout")],t.prototype,"onMouseLeave",null),i([e.HostListener("input",["$event.target.value"])],t.prototype,"onInput",null),t=i([e.Directive({selector:"[NgPasswordValidator]",exportAs:"NgPasswordValidator"}),r(0,e.Optional()),r(0,e.Inject(a))],t)}(),f=function(){function t(){}var o;return o=t,t.forRoot=function(t){return{ngModule:o,providers:[{provide:a,useValue:t}]}},t=o=i([e.NgModule({declarations:[d,h],imports:[s.CommonModule],providers:[c],exports:[d],entryComponents:[h]})],t)}();t.NgPasswordValidatorComponent=h,t.NgPasswordValidatorDirective=d,t.NgPasswordValidatorModule=f,t.NgPasswordValidatorService=a,t.ɵa=c,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-password-validator.umd.min.js.map